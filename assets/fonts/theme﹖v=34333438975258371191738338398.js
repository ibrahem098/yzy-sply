import{_ as u}from"main/modulepreload-polyfill";function E(o){return Array.from(o.querySelectorAll("summary, a[href], button:enabled, [tabindex]:not([tabindex^='-']), [draggable], area, input:not([type=hidden]):enabled, select:enabled, textarea:enabled, object, iframe")).filter(e=>!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length))}const g={};function P(o,t=o){const e=E(o),s=e[0],i=e[e.length-1];w(),g.focusin=n=>{n.target!==o&&n.target!==i&&n.target!==s||document.addEventListener("keydown",g.keydown)},g.focusout=function(){document.removeEventListener("keydown",g.keydown)},g.keydown=function(n){n.code.toUpperCase()==="TAB"&&(n.target===i&&!n.shiftKey&&(n.preventDefault(),s.focus()),(n.target===o||n.target===s)&&n.shiftKey&&(n.preventDefault(),i.focus()))},document.addEventListener("focusout",g.focusout),document.addEventListener("focusin",g.focusin),t.focus()}function w(o=null){document.removeEventListener("focusin",g.focusin),document.removeEventListener("focusout",g.focusout),document.removeEventListener("keydown",g.keydown),o&&o.focus()}function v(o){if(o.code.toUpperCase()!=="ESCAPE")return;const t=o.target.closest("details[open]");if(!t)return;const e=t.querySelector("summary");t.removeAttribute("open"),e.setAttribute("aria-expanded",!1),e.focus()}function x(o){o.forEach(t=>{t.setAttribute("role","button"),t.setAttribute("aria-expanded",t.parentNode.hasAttribute("open")),t.nextElementSibling.getAttribute("id")&&t.setAttribute("aria-controls",t.nextElementSibling.id),t.addEventListener("click",e=>{e.currentTarget.setAttribute("aria-expanded",!e.currentTarget.closest("details").hasAttribute("open"))}),t.parentElement.addEventListener("keyup",v)})}function T({query:o}){const t=window.matchMedia(o);return new Promise(function(e){t.matches?e(!0):t.addEventListener("change",e,{once:!0})})}function D({element:o}){return new Promise(function(t){const e=new window.IntersectionObserver(async function(s){for(const i of s)if(i.isIntersecting){e.disconnect(),t(!0);break}});e.observe(o)})}function L(){return new Promise(function(o){"requestIdleCallback"in window?window.requestIdleCallback(o):setTimeout(o,200)})}const X=Object.assign({"/frontend/islands/add-to-cart-button.js":()=>u(()=>import("components/add-to-cart-button"),[],import.meta.url),"/frontend/islands/card-product.js":()=>u(()=>import("components/card-product"),[],import.meta.url),"/frontend/islands/cart-drawer-items.js":()=>u(()=>import("components/cart-drawer-items"),[],import.meta.url),"/frontend/islands/cart-drawer.js":()=>u(()=>import("components/cart-drawer"),[],import.meta.url),"/frontend/islands/cart-items.js":()=>u(()=>import("components/cart-items"),[],import.meta.url),"/frontend/islands/cart-note.js":()=>u(()=>import("components/cart-note"),[],import.meta.url),"/frontend/islands/cart-remove-button.js":()=>u(()=>import("components/cart-remove-button"),[],import.meta.url),"/frontend/islands/details-disclosure.js":()=>u(()=>import("components/details-disclosure"),[],import.meta.url),"/frontend/islands/details-modal.js":()=>u(()=>import("components/details-modal"),[],import.meta.url),"/frontend/islands/enhanced-accessibility.js":()=>u(()=>import("components/enhanced-accessibility"),[],import.meta.url),"/frontend/islands/group-zoom-grids.js":()=>u(()=>import("components/group-zoom-grids"),[],import.meta.url),"/frontend/islands/header-drawer.js":()=>u(()=>import("components/header-drawer"),[],import.meta.url),"/frontend/islands/localization-form.js":()=>u(()=>import("components/localization-form"),[],import.meta.url),"/frontend/islands/media-viewer.js":()=>u(()=>import("components/media-viewer"),[],import.meta.url),"/frontend/islands/password-modal.js":()=>u(()=>import("components/password-modal"),[],import.meta.url),"/frontend/islands/product-details.js":()=>u(()=>import("components/product-details"),[],import.meta.url),"/frontend/islands/product-form.js":()=>u(()=>import("components/product-form"),[],import.meta.url),"/frontend/islands/product-recommendations.js":()=>u(()=>import("components/product-recommendations"),[],import.meta.url),"/frontend/islands/product-selector.js":()=>u(()=>import("components/product-selector"),[],import.meta.url),"/frontend/islands/quantity-input.js":()=>u(()=>import("components/quantity-input"),[],import.meta.url),"/frontend/islands/sticky-header.js":()=>u(()=>import("components/sticky-header"),[],import.meta.url),"/frontend/islands/variant-radios.js":()=>u(()=>import("components/variant-radios"),[],import.meta.url),"/frontend/islands/variant-selects.js":()=>u(()=>import("components/variant-selects"),[],import.meta.url),"/frontend/islands/zoom-collection.js":()=>u(()=>import("components/zoom-collection"),[],import.meta.url),"/frontend/islands/zoom-controls.js":()=>u(()=>import("components/zoom-controls"),[],import.meta.url),"/frontend/islands/zoom-grid.js":()=>u(()=>import("components/zoom-grid"),[],import.meta.url)});function Y(o){const t=new window.MutationObserver(s=>{for(let i=0;i<s.length;i++){const{addedNodes:n}=s[i];for(let r=0;r<n.length;r++){const a=n[r];a.nodeType===1&&e(a)}}});async function e(s){const i=s.tagName.toLowerCase(),n=`/frontend/islands/${i}.js`;if(/-/.test(i)&&o[n]){s.hasAttribute("client:visible")&&await D({element:s});const l=s.getAttribute("client:media");l&&await T({query:l}),s.hasAttribute("client:idle")&&await L(),o[n]()}let a=s.firstElementChild;for(;a;)e(a),a=a.nextElementSibling}e(document.body),t.observe(document.body,{childList:!0,subtree:!0})}function q(o="json"){return{method:"POST",headers:{"Content-Type":"application/json",Accept:`application/${o}`}}}function G(o,t){let e;return(...s)=>{clearTimeout(e),e=setTimeout(()=>o.apply(this,s),t)}}function j(o,t,e={}){return document.body.dataset.textScramble==="true"?A(o,t,e):M(o,t,e)}function M(o,t,e={}){const{speed:s=200,direction:i="up"}=e,n=document.createElement("div");n.style.position="relative",n.style.overflow="hidden",n.style.height=`${o.offsetHeight}px`;const r=o.textContent,a=document.createElement("div"),l=document.createElement("div");return[a,l].forEach(c=>{c.style.position="absolute",c.style.width="100%",c.style.transition=`transform ${s}ms ease-in-out`}),a.textContent=r,l.textContent=t,a.style.transform="translateY(0)",l.style.transform=`translateY(${i==="up"?"100%":"-100%"})`,n.appendChild(a),n.appendChild(l),o.textContent="",o.appendChild(n),n.offsetHeight,a.style.transform=`translateY(${i==="up"?"-100%":"100%"})`,l.style.transform="translateY(0)",new Promise(c=>{setTimeout(()=>{o.textContent=t,c()},s)})}function A(o,t,e={}){const{speed:s=200,permanent:i=!1}=e,n="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*+-{}[]<>?",r=o.textContent;let a=null;const l=document.createElement("span");l.classList.add("sr-only"),l.textContent=t;const c=document.createElement("span");return c.classList.add("not-sr-only"),c.setAttribute("aria-hidden","true"),c.textContent=r,o.textContent="",o.appendChild(l),o.appendChild(c),new Promise(d=>{function m(){return(i?t:r).split("").map(p=>p===" "||/[^a-zA-Z0-9]/.test(p)?p:n[Math.floor(Math.random()*n.length)]).join("")}function f(h){a||(a=h);const p=i?0:(h-a)/s;if(i||p<1){if(i)c.textContent=m();else{const _=t.split("").map((y,R)=>y===" "||/[^a-zA-Z0-9]/.test(y)||p>.5&&Math.random()<(p-.5)*2?y:n[Math.floor(Math.random()*n.length)]).join("");c.textContent=_}requestAnimationFrame(f)}else i||(o.textContent=t),d()}requestAnimationFrame(f)})}function V(o){let t=!1;return{promise:new Promise((s,i)=>{o.then(n=>t?i({isCancelled:t,value:n}):s(n),n=>i(t?{isCancelled:t,error:n}:n))}),cancel(){t=!0},get isCancelled(){return t}}}function C(){const o=document.querySelector("zoom-collection"),t=o==null?void 0:o.dataset.zoomLevel;let e=0;if(o&&t==="1"){const s=document.querySelector("zoom-collection > *"),r=s.offsetWidth+192;e=Math.max(0,(s.offsetHeight-r)/2),o.style.setProperty("--grid-offset-top",`${e}px`)}else o&&o.style.setProperty("--grid-offset-top",`${e}px`)}function I(){let o;const t=n=>{const r=document.querySelector("header-drawer nav");r&&(o=document.createElement("a"),o.href="#",o.className="flex items-center py-2",o.textContent="Cookies",o.addEventListener("click",a=>{a.preventDefault();const l=n.dataset.revealed==="true";n.dataset.revealed=(!l).toString()}),r.appendChild(o))},e=()=>{o&&(o.remove(),o=null)},s=()=>{const n=document.querySelector(".csm-cookie-consent");if(!n)return!1;const r=n.querySelector(".cc-banner");return r?(r.dataset.revealed="false",t(r),r.addEventListener("click",a=>{a.target.matches("button.isense-cc-submit-consent")&&e()}),!0):!1};if(s())return;new MutationObserver((n,r)=>{s()&&r.disconnect()}).observe(document.body,{childList:!0,subtree:!0})}class ${constructor(t={}){this.options={gallery:'.zoom-hijack[data-zoom="1"]',container:".card-product__image-container",children:".card-product__image-link",elementRoot:"body",scrollElements:["body"],dataSource:null,duration:500,scaleDuration:200,ease:"cubic-bezier(.42,0,.58,1)",backdropColor:"rgba(0, 0, 0, 0.5)",initialScale:1.75,minScale:1,maxScale:3,mobileMinScale:1.75,scaleStep:.15,...t},typeof this.options.scrollElements=="string"&&(this.options.scrollElements=[this.options.scrollElements]),this.isOpen=!1,this.eventHandlers=new Map,this.isInitialized=!1,this.containers=new Set,this.element=null,this.scrollElements=new Map,this.isClosing=!1,this.closeTimeout=null,this.init=this.init.bind(this),this.destroy=this.destroy.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this),this.on=this.on.bind(this),this.off=this.off.bind(this),this._handleClick=this._handleClick.bind(this),this._handleLightboxClick=this._handleLightboxClick.bind(this),this._handleGalleryScroll=this._handleGalleryScroll.bind(this),this._handleWheel=this._handleWheel.bind(this),this._handleTouchStart=this._handleTouchStart.bind(this),this._handleTouchMove=this._handleTouchMove.bind(this),this._handleTouchEnd=this._handleTouchEnd.bind(this),this._handleMouseDown=this._handleMouseDown.bind(this),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this._handleResize=this._handleResize.bind(this),this._handleKeyDown=this._handleKeyDown.bind(this),this.currentContainer=null,this.currentGalleryWrapper=null,this.touchState={initialDistance:0,initialScale:1,isZooming:!1,isDragging:!1,startX:0,startY:0,lastX:0,lastY:0,startTime:0,zoomEndTime:0,cooldownDuration:150,targetImage:null,activeTouches:0,wasMultiTouch:!1,lastMoveX:0,lastMoveTime:0,swipeVelocity:0},this.dragState={isDragging:!1,wasDragging:!1,startX:0,startY:0,currentX:0,currentY:0,targetImage:null,initialX:0,initialY:0,moved:!1},this.currentScale=this.options.initialScale,this._handleResize(),window.addEventListener("resize",this._handleResize)}init(){if(!this.isInitialized)return this._emit("beforeInit"),this._initializeContainers(),this._initializeScrollElements(),this.isInitialized=!0,this._emit("afterInit"),this}_initializeScrollElements(){this.options.scrollElements.forEach(t=>{if(t==="body")this.scrollElements.set(document.body,null);else{const e=document.querySelectorAll(t);e.length>0?e.forEach(s=>{this.scrollElements.set(s,null)}):console.warn(`ðŸŽ­ Lightbox: No elements found for selector: ${t}`)}}),this.scrollElements.size===0&&(console.warn("ðŸŽ­ Lightbox: No scroll elements found, falling back to body"),this.scrollElements.set(document.body,null))}_lockScroll(){const t=new Map;this.scrollElements.forEach((e,s)=>{t.set(s,s.style.overflow)}),t.forEach((e,s)=>{this.scrollElements.set(s,e),s.style.overflow="hidden"})}_unlockScroll(){new Map(this.scrollElements).forEach((e,s)=>{e!==null?s.style.overflow=e:s.style.removeProperty("overflow")})}_initializeContainers(){document.querySelectorAll(this.options.gallery).forEach(e=>{e.querySelectorAll(this.options.container).forEach(i=>{i.addEventListener("click",this._handleClick),this.containers.add(i)})})}_handleClick(t){const e=t.target.closest(this.options.children);if(!e)return;t.preventDefault();const s=e.closest(this.options.container),i=[...s.querySelectorAll(this.options.children)],n=i.indexOf(e);this.open(n,{link:e,container:s,allLinks:i,clickedIndex:n})}_getImageDataFromElement(t){const e=t.querySelector("img");return e?{src:t.href||e.src,srcset:e.srcset||"",sizes:e.sizes||"",width:parseInt(t.dataset.pswpWidth||e.width||0,10),height:parseInt(t.dataset.pswpHeight||e.height||0,10),alt:e.alt||""}:(console.warn("ðŸŽ­ Lightbox: No image found in element",t),null)}_handleGalleryScroll(t){if(!this.currentContainer||!this.currentGalleryWrapper)return;const e=t.target,s=e.offsetWidth,i=Math.round(e.scrollLeft/s);this.currentContainer.scrollLeft=this.currentContainer.offsetWidth*i}_handleLightboxClick(t){if(this.dragState.wasDragging){this.dragState.wasDragging=!1;return}if(this.isClosing){this.isClosing=!1,clearTimeout(this.closeTimeout);const e=this.element.querySelector(".lightbox__gallery-container"),s=this.element.querySelector(".lightbox__backdrop");e&&s&&(s.style.opacity="1",Object.assign(e.style,{width:"100%",height:"100%",left:"0",top:"0"}),e.querySelectorAll(".lightbox__image").forEach(i=>{i.style.transform=`scale(${this.options.initialScale})`}))}else this.close()}_updateImageScale(t){this.currentScale=Number(t.toFixed(2)),this.element.querySelectorAll(".lightbox__image").forEach(s=>{s.style.transition=`transform ${this.options.scaleDuration}ms ${this.options.ease}`,s.style.transform=`scale(${this.currentScale}) translateX(${this.touchState.translateX||0}px) translateY(${this.touchState.translateY||0}px)`})}_handleWheel(t){if(t.deltaY===0)return;t.preventDefault();const e=t.deltaY<0?this.options.scaleStep:-this.options.scaleStep,s=Math.max(this.options.minScale,Math.min(this.options.maxScale,this.currentScale+e));s!==this.currentScale&&this._updateImageScale(s)}_handleTouchStart(t){var e,s,i,n;if(this.touchState.activeTouches=t.touches.length,this.currentGalleryWrapper&&(this.currentGalleryWrapper.style.overflowX="hidden",this.currentGalleryWrapper.style.scrollBehavior="auto"),t.touches.length===2){t.preventDefault(),this.touchState.wasMultiTouch=!0;const r=t.target.closest(".lightbox__image");if(!r)return;r.style.transition="none";const a=t.touches[0],l=t.touches[1],c=Math.hypot(l.clientX-a.clientX,l.clientY-a.clientY),d=r.style.transform,m=d.includes("translateX")?parseFloat(((e=d.match(/translateX\(([-\d.]+)px\)/))==null?void 0:e[1])||0):0,f=d.includes("translateY")?parseFloat(((s=d.match(/translateY\(([-\d.]+)px\)/))==null?void 0:s[1])||0):0;this.touchState={...this.touchState,initialDistance:c,initialScale:this.currentScale,isZooming:!0,isDragging:!1,translateX:m,translateY:f,targetImage:r,activeTouches:2,wasMultiTouch:!0};return}if(t.touches.length===1&&!this.touchState.wasMultiTouch){const r=t.touches[0],a=r.target.closest(".lightbox__image");if(!a)return;a.style.transition="none";const l=a.style.transform,c=l.includes("translateX")?parseFloat(((i=l.match(/translateX\(([-\d.]+)px\)/))==null?void 0:i[1])||0):0,d=l.includes("translateY")?parseFloat(((n=l.match(/translateY\(([-\d.]+)px\)/))==null?void 0:n[1])||0):0;this.touchState={...this.touchState,isDragging:!1,isZooming:!1,startX:r.clientX,startY:r.clientY,lastX:c,lastY:d,startTime:Date.now(),targetImage:a,activeTouches:1,wasMultiTouch:!1}}}_handleImageDrag(t,e){const{targetImage:s,startX:i,startY:n,lastX:r,lastY:a}=e;if(!s)return;const l=t.touches[0].clientX-i,c=t.touches[0].clientY-n,d=r+l/this.currentScale,m=a+c/this.currentScale;s.style.transform=`scale(${this.currentScale}) translateX(${d}px) translateY(${m}px)`}_handleGallerySwipe(t,e){const{startX:s,startTime:i}=e,r=t.touches[0].clientX,a=Date.now()-i;return{swipeVelocity:(r-s)/a,lastMoveX:r,lastMoveTime:Date.now()}}_handleSwipeNavigation(t,e){if(!this.currentGalleryWrapper)return{translateX:0,translateY:0};const s=this.currentGalleryWrapper.offsetWidth,i=Math.round(this.currentGalleryWrapper.scrollLeft/s),n=i+e,r=this.currentGalleryWrapper.children.length-1;return n<0||n>r?{translateX:this.touchState.translateX||0,translateY:this.touchState.translateY||0}:(this.currentGalleryWrapper.querySelectorAll(".lightbox__image").forEach((a,l)=>{l!==i&&(a.style.transition="none",a.style.transform=`scale(${this.options.initialScale}) translateX(0%) translateY(0%)`)}),this.currentGalleryWrapper.scrollTo({left:n*s,behavior:"smooth"}),setTimeout(()=>{var l;const a=(l=this.currentGalleryWrapper.children[i])==null?void 0:l.querySelector(".lightbox__image");a&&(a.style.transition="none",a.style.transform=`scale(${this.options.initialScale}) translateX(0%) translateY(0%)`)},300),this.currentScale=this.options.initialScale,{translateX:0,translateY:0})}_handlePinchZoom(t,e){const{initialDistance:s,initialScale:i,targetImage:n}=e;if(!n)return null;n.style.transition="none";const r=t.touches[0],a=t.touches[1],c=Math.hypot(a.clientX-r.clientX,a.clientY-r.clientY)/s,d=Math.max(this.options.minScale,Math.min(this.options.maxScale,i*c));return d!==this.currentScale&&(this.currentScale=d,n.style.transform=`scale(${this.currentScale}) translateX(${this.touchState.translateX||0}px) translateY(${this.touchState.translateY||0}px)`),d}_handleTouchMove(t){if(this.touchState.isZooming&&t.touches.length===2){t.preventDefault(),this._handlePinchZoom(t,this.touchState);return}if(t.touches.length===1&&!this.touchState.wasMultiTouch){const e=t.touches[0],s=e.target.closest(".lightbox__image");if(!s)return;const i=e.clientX-this.touchState.startX,n=e.clientY-this.touchState.startY,r=this._handleGallerySwipe(t,{startX:this.touchState.startX,startTime:this.touchState.startTime});this.touchState={...this.touchState,...r},!this.touchState.isDragging&&(Math.abs(i)>3||Math.abs(n)>3)&&(this.touchState.isDragging=!0,s.style.transition="none",this.currentGalleryWrapper&&(this.currentGalleryWrapper.style.overflowX="hidden")),this.touchState.isDragging&&(t.preventDefault(),t.stopPropagation(),this._handleImageDrag(t,{targetImage:s,startX:this.touchState.startX,startY:this.touchState.startY,lastX:this.touchState.lastX,lastY:this.touchState.lastY}))}}_handleTouchEnd(t){var s,i,n,r;this.touchState.activeTouches=t.touches.length;const e=t.target.closest(".lightbox__image");if(t.touches.length===0){const a=Math.abs(this.touchState.swipeVelocity),l=Math.abs(this.touchState.lastMoveX-this.touchState.startX)>Math.abs(t.changedTouches[0].clientY-this.touchState.startY);if(a>.5&&l&&this.currentGalleryWrapper){const h=this.touchState.swipeVelocity>0?-1:1,{translateX:p,translateY:_}=this._handleSwipeNavigation(a,h);this.touchState={...this.touchState,translateX:p,translateY:_,lastMoveX:0,lastMoveTime:0,swipeVelocity:0},setTimeout(()=>{this.currentGalleryWrapper.querySelectorAll(".lightbox__image").forEach(y=>{y.style.transition=`transform ${this.options.duration}ms ${this.options.ease}`})},100);return}if(this.touchState.isZooming&&e){t.preventDefault();const h=e.style.transform,p=h.includes("translateX")?parseFloat(((s=h.match(/translateX\(([-\d.]+)px\)/))==null?void 0:s[1])||0):0,_=h.includes("translateY")?parseFloat(((i=h.match(/translateY\(([-\d.]+)px\)/))==null?void 0:i[1])||0):0;this.touchState.zoomEndTime=Date.now(),this.touchState.translateX=p,this.touchState.translateY=_,e.style.transition=`transform ${this.options.duration}ms ${this.options.ease}`,e.style.transform=`scale(${this.currentScale}) translateX(${p}px) translateY(${_}px)`}else if(this.touchState.isDragging&&e){t.preventDefault();const h=e.style.transform,p=h.includes("translateX")?parseFloat(((n=h.match(/translateX\(([-\d.]+)px\)/))==null?void 0:n[1])||0):0,_=h.includes("translateY")?parseFloat(((r=h.match(/translateY\(([-\d.]+)px\)/))==null?void 0:r[1])||0):0;this.touchState.translateX=p,this.touchState.translateY=_,e.style.transition=`transform ${this.options.duration}ms ${this.options.ease}`,e.style.transform=`scale(${this.currentScale}) translateX(${p}px) translateY(${_}px)`}const{translateX:c,translateY:d,zoomEndTime:m,cooldownDuration:f}=this.touchState;this.touchState={initialDistance:0,initialScale:1,isZooming:!1,isDragging:!1,startX:0,startY:0,startTime:0,targetImage:null,translateX:c,translateY:d,zoomEndTime:m,cooldownDuration:f,activeTouches:0,wasMultiTouch:!1,lastMoveX:0,lastMoveTime:0,swipeVelocity:0}}setTimeout(()=>{this.currentGalleryWrapper&&(this.currentGalleryWrapper.style.scrollBehavior="smooth")},300),!this.touchState.isDragging&&Math.abs(this.touchState.swipeVelocity)<.5&&this.currentGalleryWrapper&&(this.currentGalleryWrapper.style.overflowX="scroll")}_handleMouseDown(t){var r,a;if(t.button!==0)return;const e=t.target.closest(".lightbox__image");if(!e)return;t.preventDefault(),e.style.transition="none";const s=e.style.transform,i=s.includes("translateX")?parseFloat(((r=s.match(/translateX\(([-\d.]+)px\)/))==null?void 0:r[1])||0):0,n=s.includes("translateY")?parseFloat(((a=s.match(/translateY\(([-\d.]+)px\)/))==null?void 0:a[1])||0):0;this.dragState={isDragging:!0,wasDragging:!1,startX:t.clientX,startY:t.clientY,currentX:i,currentY:n,targetImage:e,initialX:i,initialY:n,moved:!1},document.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)}_handleMouseMove(t){if(!this.dragState.isDragging)return;t.preventDefault();const e=t.clientX-this.dragState.startX,s=t.clientY-this.dragState.startY;(Math.abs(e)>3||Math.abs(s)>3)&&(this.dragState.wasDragging=!0);const i=this.dragState.currentX+e/this.currentScale,n=this.dragState.currentY+s/this.currentScale;this.dragState.targetImage.style.transform=`scale(${this.currentScale}) translateX(${i}px) translateY(${n}px)`}_handleMouseUp(t){if(!this.dragState.isDragging)return;t.preventDefault(),this.dragState.targetImage&&(this.dragState.targetImage.style.transition=`transform ${this.options.duration}ms ${this.options.ease}`);const e=this.dragState.wasDragging;this.dragState.isDragging=!1,this.dragState.targetImage=null,document.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),e&&t.stopPropagation()}_createLightboxElement(t,e){const s=document.createElement("lightbox");s.className="lightbox absolute inset-0",s.setAttribute("role","dialog"),s.setAttribute("aria-modal","true"),s.addEventListener("click",this._handleLightboxClick);const i=document.createElement("div");i.className="lightbox__backdrop absolute inset-0 z-10 cursor-pointer opacity-0",i.style.transition=`opacity ${this.options.duration}ms ${this.options.ease}`,i.style.backgroundColor=this.options.backdropColor,i.style.willChange="opacity";const n=document.createElement("div");n.className="lightbox__container absolute inset-0 z-20 pointer-events-none";const r=document.createElement("div");if(r.className="lightbox__gallery-container pointer-events-auto absolute",r.style.transition=`all ${this.options.duration}ms ${this.options.ease}`,r.style.willChange="transform, width, height, left, top",e!=null&&e.container){const l=e.container.getBoundingClientRect(),c=window.scrollY||window.pageYOffset,m=(document.querySelector(this.options.elementRoot)||document.body).getBoundingClientRect(),f={width:`${l.width}px`,height:`${l.height}px`,left:`${l.left-m.left}px`,top:`${l.top-m.top+c}px`};Object.assign(r.style,f),requestAnimationFrame(()=>{i.style.opacity="1",Object.assign(r.style,{width:"100%",height:"100%",left:"0",top:"0"})})}const a=document.createElement("div");if(a.className="lightbox__gallery w-full h-full flex snap-x snap-mandatory overflow-y-hidden overflow-x-scroll scrollbar-none",a.style.scrollBehavior="smooth",e!=null&&e.container&&(this.currentContainer=e.container,this.currentGalleryWrapper=a,a.addEventListener("scroll",this._handleGalleryScroll)),e){const l=`translateX(-${e.clickedIndex*100}%)`;a.style.transform=l,e.allLinks.forEach((c,d)=>{const m=this._getImageDataFromElement(c);if(!m)return;const f=document.createElement("div");f.className="lightbox__slide w-full h-full shrink-0 snap-start snap-always flex items-center justify-center overflow-hidden";const h=document.createElement("img");h.className="lightbox__image w-full h-auto aspect-square",h.style.transition=`transform ${this.options.duration}ms ${this.options.ease}`,h.style.transform="scale(1) translateX(0%) translateY(0%)",h.style.willChange="transform",h.addEventListener("mousedown",this._handleMouseDown),h.src=m.src,m.srcset&&(h.srcset=m.srcset,h.sizes=m.sizes||"100vw"),h.alt=m.alt,f.appendChild(h),a.appendChild(f)}),requestAnimationFrame(()=>{a.style.transform="";const c=a.offsetWidth;a.style.scrollBehavior="auto",a.scrollLeft=c*e.clickedIndex,requestAnimationFrame(()=>{a.style.scrollBehavior="smooth"}),this.currentScale=this.options.initialScale,a.querySelectorAll(".lightbox__image").forEach(d=>{d.style.transform=`scale(${this.currentScale})`,d.srcset&&(d.sizes="200vw")})})}return r.addEventListener("wheel",this._handleWheel),r.addEventListener("touchstart",this._handleTouchStart,{passive:!1}),r.addEventListener("touchmove",this._handleTouchMove,{passive:!1}),r.addEventListener("touchend",this._handleTouchEnd,{passive:!1}),r.appendChild(a),n.appendChild(r),s.appendChild(i),s.appendChild(n),s}open(t=0,e=null){if(!this.isInitialized){console.warn("ðŸŽ­ Lightbox: Not initialized. Call init() first.");return}this._emit("beforeOpen",{index:t}),this._lockScroll(),document.addEventListener("keydown",this._handleKeyDown),e!=null&&e.container&&(e.container.style.opacity="0");const s=document.querySelector(this.options.elementRoot)||document.body;this.element=this._createLightboxElement(null,e),s.appendChild(this.element),this.options.elementRoot!=="body"&&(s.style.position="relative"),this.isOpen=!0,this._emit("afterOpen",{index:t})}close(){if(!(!this.isOpen||this.isClosing)){if(this._emit("beforeClose"),this.isClosing=!0,this.currentContainer&&this.element){const t=this.currentContainer.getBoundingClientRect(),s=(document.querySelector(this.options.elementRoot)||document.body).getBoundingClientRect(),i=window.scrollY||window.pageYOffset,n=this.element.querySelector(".lightbox__gallery-container"),r=this.element.querySelector(".lightbox__backdrop");if(n&&r){r.style.opacity="0",n.querySelectorAll(".lightbox__image").forEach(a=>{a.style.transition=`transform ${this.options.duration}ms ${this.options.ease}`,a.style.transform="scale(1) translateX(0%) translateY(0%)"}),Object.assign(n.style,{width:`${t.width}px`,height:`${t.height}px`,left:`${t.left-s.left}px`,top:`${t.top-s.top+i}px`}),this.closeTimeout=setTimeout(()=>{this.isClosing&&this._cleanupAndClose()},this.options.duration);return}}this._cleanupAndClose()}}_cleanupAndClose(){var e;this.isClosing=!1,this.closeTimeout=null,this.currentScale=this.options.initialScale,document.removeEventListener("keydown",this._handleKeyDown),this.dragState={isDragging:!1,wasDragging:!1,startX:0,startY:0,currentX:0,currentY:0,targetImage:null,initialX:0,initialY:0,moved:!1};const t=(e=this.element)==null?void 0:e.querySelector(".lightbox__gallery-container");t&&(t.removeEventListener("wheel",this._handleWheel),t.removeEventListener("touchstart",this._handleTouchStart),t.removeEventListener("touchmove",this._handleTouchMove),t.removeEventListener("touchend",this._handleTouchEnd)),this.currentGalleryWrapper&&(this.currentGalleryWrapper.removeEventListener("scroll",this._handleGalleryScroll),this.currentGalleryWrapper=null),this.currentContainer=null,document.querySelectorAll(this.options.container).forEach(s=>{s.style.removeProperty("opacity")}),this._unlockScroll(),document.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.element&&(this.element.removeEventListener("click",this._handleLightboxClick),this.element.remove(),this.element=null),this.isOpen=!1,this._emit("afterClose")}destroy(){this.isInitialized&&(this._emit("beforeDestroy"),window.removeEventListener("resize",this._handleResize),this.currentGalleryWrapper&&(this.currentGalleryWrapper.removeEventListener("scroll",this._handleGalleryScroll),this.currentGalleryWrapper=null),this.currentContainer=null,this._unlockScroll(),this.containers.forEach(t=>{t.removeEventListener("click",this._handleClick)}),this.containers.clear(),this.element&&(this.element.removeEventListener("click",this._handleLightboxClick),this.element.remove(),this.element=null),this.isInitialized=!1,this.eventHandlers.clear(),this._emit("afterDestroy"))}on(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new Set),this.eventHandlers.get(t).add(e),this}off(t,e){const s=this.eventHandlers.get(t);return s&&s.delete(e),this}_emit(t,e){const s=this.eventHandlers.get(t);s&&s.forEach(i=>i(e))}_handleResize(){const e=window.innerWidth<768?this.options.mobileMinScale:1;e!==this.options.minScale&&(this.options.minScale=e,this.isOpen&&this.currentScale<this.options.minScale&&this._updateImageScale(this.options.minScale))}_handleKeyDown(t){if(this.isOpen)switch(t.key){case"Escape":this.close();break;case"ArrowLeft":case"ArrowRight":if(!this.currentGalleryWrapper)return;const e=t.key==="ArrowLeft"?-1:1,s=this.currentGalleryWrapper.offsetWidth,i=Math.round(this.currentGalleryWrapper.scrollLeft/s),n=Math.max(0,Math.min(this.currentGalleryWrapper.children.length-1,i+e));this.currentGalleryWrapper.querySelectorAll(".lightbox__image").forEach((r,a)=>{a!==i&&(r.style.transition="none",r.style.transform=`scale(${this.options.initialScale}) translateX(0%) translateY(0%)`)}),this.currentGalleryWrapper.scrollTo({left:n*s,behavior:"smooth"}),setTimeout(()=>{var a;const r=(a=this.currentGalleryWrapper.children[i])==null?void 0:a.querySelector(".lightbox__image");r&&(r.style.transition="none",r.style.transform=`scale(${this.options.initialScale}) translateX(0%) translateY(0%)`)},300),this.currentScale=this.options.initialScale,this.touchState={...this.touchState,translateX:0,translateY:0},setTimeout(()=>{this.currentGalleryWrapper.querySelectorAll(".lightbox__image").forEach(r=>{r.style.transition=`transform ${this.options.duration}ms ${this.options.ease}`})},100);break}}}const W=localStorage.getItem("enhancedAccessibility")==="true";W&&document.body.classList.add("enhanced-a11y");const O=document.querySelectorAll('[id^="Details-"] summary');C();Y(X);x(O);I();const b=new $({gallery:'.zoom-hijack[data-zoom="1"]',container:".card-product__image-container",children:"a.card-product__image-link",elementRoot:"main",scrollElements:"zoom-grid",duration:200,scaleDuration:200,backdropColor:"transparent"});window.lightbox=b;const S=document.querySelector("summary.menu-button");b.on("beforeOpen",({index:o})=>{console.log("Opening lightbox at index:",o),S&&S.setAttribute("aria-label","Close image lightbox")}).on("afterClose",()=>{}).on("beforeDestroy",()=>{S&&S.setAttribute("aria-label","Back to previous zoom level")}).on("afterInit",()=>{console.log("Lightbox initialized!")}).on("beforeInit",()=>{console.log("Lightbox starting initialization...")});b.init();export{j as a,V as c,G as d,q as f,w as r,C as s,P as t};
